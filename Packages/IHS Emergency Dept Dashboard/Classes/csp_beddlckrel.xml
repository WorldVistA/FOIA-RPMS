<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25" zv="Cache for UNIX (Red Hat Enterprise Linux for x86-64) 2014.1.3 (Build 775)" ts="2018-09-28 14:46:46">
<Class name="csp.beddlckrel">
<ClassType/>
<Hidden>1</Hidden>
<Import>User</Import>
<Language>cache</Language>
<ProcedureBlock>0</ProcedureBlock>
<Super>%CSP.Page</Super>
<TimeChanged>64672,29653.845967</TimeChanged>
<TimeCreated>64672,29653.843553</TimeCreated>
<GeneratedBy>/csp/foia_goldb/BEDDLCKREL.csp</GeneratedBy>

<Method name="OnPage">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	Do ..OnPageCSPROOT()
	Quit $$$OK
]]></Implementation>
</Method>

<Method name="OnPageBODY">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<body>"
	Write !,!,"<h4><font color=""RED""> RECORD LOCKS &nbsp; &nbsp; </font>",!
	Write "<b>"
	Write "<div align=""center"">"
	Write "<a href="""_($zconvert(..Link("BEDDAPPL.EDManager.cls"),"O","HTML"))_""">"
	Write "Manager Home Page"
	Write "</a>"
	Write "</div>"
	Write "</b> </h4>",!
	Write !,"<table border=1 >",!
	Write "	<tr>",!
	Write "		"
	&html<<th>Check-In</th><th>Patient (gender)</th><th>DOB (age) </th>>
	&html<<th>Chart</th><th>Locked by User </th><th>Locked Date/Time</th>>
	Write "		",!
	Write "	</tr>",!
	Write !
	Kill beddlst,trrow
	Do LKLST^BEDDUTW(.beddlst,$G(site),$G(duz))
	Set bgc="white"
	Set trrow=0
	Set beddlst=$O(beddlst(""))
	While (beddlst]"") { 
	Set edid=##class(BEDD.EDVISIT).%OpenId(beddlst)
	Set trrow=trrow+1 s bgc="#FFFFFF" I trrow#2=0 s bgc="#C0C0C0"
	&html<<tr bgcolor=#(bgc)#>>
	&html<<td> #(edid.PtCIDT)# </td>>
	&html<<td> <a href="BEDDUNLOCK.csp?OBJID=#(beddlst)#&DFN=#(edid.PtDFN)#"> #(edid.PtName)# (#(edid.Sex)#) </a> </td>>
	&html<<td> #(edid.DOB)# (#(edid.Age)#) </td>>
	&html<<td> #(edid.Chart)# </td>>
	&html<<td> #($$GETF^BEDDUTIL(200,edid.RecLockUser,.01,"E"))# </td>>	
	&html<<td> #($TR($$HTE^XLFDT(edid.RecLockDT,"2ZM"),"@"," "))# </td>>
	Set beddlst=$O(beddlst(beddlst))
	}
	Write !,"	</tr>",!
	Write "</table>",!
	Write !,"</body>"
]]></Implementation>
</Method>

<Method name="OnPageCSPROOT">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<!-- BEDDLCKREL.csp - BEDD Locked Records Listing -->"
	Write !,"<!-- ;;2.0;IHS EMERGENCY DEPT DASHBOARD;**1**;Apr 02, 2014 -->"
	Write !
	Do ..OnPageHTML()
]]></Implementation>
</Method>

<Method name="OnPageHEAD">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<head>"
	Write !,!,!,!,"</head>"
]]></Implementation>
</Method>

<Method name="OnPageHTML">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<HTML>"
	Write !,!
	Set U="^",site=%session.Data("SITE")
	Do LOADSYS^BEDDUTW(.beddsys,site)
	Set timeout=$G(beddsys("TimeOut"))
	Set duz=%session.Data("DUZ")
	Write !,!,"<META HTTP-EQUIV=""Refresh"" CONTENT="""_( timeout )_"; URL=BEDD.csp"">"
	Write !,!
	Do ..OnPageHEAD()
	Write !,!
	Do ..OnPageBODY()
	Write !,"</HTML>"
]]></Implementation>
</Method>

<Method name="OnPreHTTP">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<FormalSpec/>
<Language>cache</Language>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
 
 	//Check for access information
 	If ($Get(%session.Data("DUZ")) = "") {
 		Set %response.Redirect="BEDDLogin.csp"
 	}
 	
 	Quit 1
 
]]></Implementation>
</Method>

<Parameter name="CSPFILE">
<Default>D:\intersystems\E3IHS\CSP\foia_goldb\BEDDLCKREL.csp</Default>
</Parameter>

<Parameter name="CSPURL">
<Default>/csp/foia_goldb/BEDDLCKREL.csp</Default>
</Parameter>

<Parameter name="FileTimestamp">
<Default>64671,78208</Default>
</Parameter>
</Class>
</Export>
